!function(t){function e(r){if(n[r])return n[r].exports;var i=n[r]={i:r,l:!1,exports:{}};return t[r].call(i.exports,i,i.exports,e),i.l=!0,i.exports}var n={};return e.m=t,e.c=n,e.i=function(t){return t},e.d=function(t,n,r){e.o(t,n)||Object.defineProperty(t,n,{configurable:!1,enumerable:!0,get:r})},e.n=function(t){var n=t&&t.__esModule?function(){return t.default}:function(){return t};return e.d(n,"a",n),n},e.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},e.p="http://localhost:8080/",e(e.s=13)}([function(t,e,n){"use strict";var r;!function(t){t[t.Heart=0]="Heart",t[t.Diamond=1]="Diamond",t[t.Spade=2]="Spade",t[t.Clove=3]="Clove"}(r=e.CardSuit||(e.CardSuit={}));var i;!function(t){t[t.Ace=1]="Ace",t[t.Two=2]="Two",t[t.Three=3]="Three",t[t.Four=4]="Four",t[t.Five=5]="Five",t[t.Six=6]="Six",t[t.Seven=7]="Seven",t[t.Eight=8]="Eight",t[t.Nine=9]="Nine",t[t.Ten=10]="Ten",t[t.Jack=11]="Jack",t[t.Queen=12]="Queen",t[t.King=13]="King"}(i=e.CardValue||(e.CardValue={}));var o;!function(t){t[t.Red=0]="Red",t[t.Black=1]="Black"}(o=e.CardColor||(e.CardColor={}))},function(t,e,n){"use strict";var r=function(){function t(){this.className=""}return t.prototype.createNode=function(t){void 0===t&&(t="");var e=document.createElement("div");e.textContent=t,e.className=this.className,this.node=e},t.prototype.getNode=function(){return this.node},t}();Object.defineProperty(e,"__esModule",{value:!0}),e.default=r},function(t,e,n){"use strict";var r=function(){function t(t){this.game=t}return t}();Object.defineProperty(e,"__esModule",{value:!0}),e.default=r},function(t,e){},function(t,e,n){"use strict";var r=n(5);try{var i=new r.default;document.addEventListener("DOMContentLoaded",function(){return i.start()})}catch(t){document.body.innerHTML="<h1>ERROR</h1><p>"+t+"</p>"}},function(t,e,n){"use strict";var r=n(11),i=n(9),o=n(10),a=n(7),u=n(12),s=function(){function t(){this.selectedMeta={dragging:!1,stack:[]}}return t.prototype.start=function(){var t=this,e=document.getElementById("board");if(!e)throw"Invalid id. Cannot find the mount point for the elements board.";this.board=e,this.stock=new i.default(this),r.default.shuffleCards(r.default.createCards(this.selectCard)).forEach(function(e){return t.stock.add(e)});var n=r.default.buildTableau(this.stock);this.waste=new o.default(this);var u=document.createElement("div");u.classList.add("board__header"),u.appendChild(this.stock.setupNode()),u.appendChild(this.waste.setupNode());var s=[new a.default,new a.default,new a.default,new a.default];s.forEach(function(t){t.createNode(),u.appendChild(t.getNode())}),this.board.appendChild(u);var d=document.createElement("div");d.classList.add("tableau"),n.forEach(function(t){return d.appendChild(t.render())}),this.board.appendChild(d)},t.prototype.drawFromStock=function(){var t=this;if(this.stock.hasCard()){for(var e=[];e.length<u.default.drawCount&&this.stock.hasCard();)e.unshift(this.stock.draw());this.waste.add(e)}else this.waste.recycle().forEach(function(e){return t.stock.add(e)})},t.prototype.selectCard=function(t){this.selected=t,console.log(t)},t}();Object.defineProperty(e,"__esModule",{value:!0}),e.default=s},function(t,e,n){"use strict";var r=n(0),i=function(){function t(t,e,n){this.isInPile=!1,this.isInFoundation=!1,this.value=t,this.suit=e,this.selectCallback=n}return t.prototype.color=function(){return this.suit==r.CardSuit.Heart||this.suit==r.CardSuit.Diamond?r.CardColor.Red:r.CardColor.Black},t.prototype.setupNode=function(){var t=this,e=document.createElement("div");return e.classList.add("card"),e.setAttribute("data-suit",String(this.suit)),e.setAttribute("data-value",String(this.value)),this.revealed?(e.classList.add("card--revealed"),e.textContent=r.CardValue[this.value]+" "+r.CardSuit[this.suit]):e.textContent="HIDDEN",e.addEventListener("click",function(){console.log(r.CardValue[t.value],r.CardSuit[t.suit]),t.isSelectable()&&(console.log("can select"),t.selectCallback(t))}),this.node=e},t.prototype.isSelectable=function(){return this.revealed===!0},t.prototype.updateNode=function(){return this.node},t.prototype.acceptsSibling=function(t){return this.isInFoundation?t.suit===this.suit&&t.value===this.value+1:!!this.isInPile&&(t.color()!==this.color()&&t.value===this.value-1)},t}();Object.defineProperty(e,"__esModule",{value:!0}),e.default=i},function(t,e,n){"use strict";var r=this&&this.__extends||function(t,e){function n(){this.constructor=t}for(var r in e)e.hasOwnProperty(r)&&(t[r]=e[r]);t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)},i=n(1),o=n(0),a=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.className="foundation",e.cards=[],e}return r(e,t),e.prototype.canAddCard=function(t){return 0==this.cards.length&&t.value==o.CardValue.Ace||this.suit==t.suit&&this.highestValue+1==t.value},e}(i.default);Object.defineProperty(e,"__esModule",{value:!0}),e.default=a},function(t,e,n){"use strict";var r=this&&this.__extends||function(t,e){function n(){this.constructor=t}for(var r in e)e.hasOwnProperty(r)&&(t[r]=e[r]);t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)},i=n(1),o=n(0),a=function(t){function e(e){var n=t.call(this)||this;return n.cards=[],n.className="pile",n.index=e,n}return r(e,t),e.prototype.canAddCard=function(t){return 0==this.cards.length&&t.value==o.CardValue.King||this.topCard.color()!==t.color()&&this.topCard.value-1==t.value},e.prototype.render=function(){this.createNode();for(var t=0;t<this.cards.length;t++){var e=this.cards[t].setupNode();e.setAttribute("data-pile",String(this.index)),e.setAttribute("data-index",String(t)),this.node.appendChild(e)}return this.node},e}(i.default);Object.defineProperty(e,"__esModule",{value:!0}),e.default=a},function(t,e,n){"use strict";var r=this&&this.__extends||function(t,e){function n(){this.constructor=t}for(var r in e)e.hasOwnProperty(r)&&(t[r]=e[r]);t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)},i=n(2),o=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.cards=[],e}return r(e,t),e.prototype.hasCard=function(){return this.cards.length>0},e.prototype.draw=function(){var t=this.cards.pop();return this.updateNode(),t},e.prototype.undoDraw=function(t){this.cards.push(t)},e.prototype.add=function(t){this.cards.unshift(t),this.updateNode()},e.prototype.undoAdd=function(){return this.cards.shift()},e.prototype.setupNode=function(){var t=this;return this.node=document.createElement("div"),this.node.className="stock",this.node.addEventListener("click",function(){return t.game.drawFromStock()}),this.updateNode()},e.prototype.updateNode=function(){return this.node&&(this.node.textContent=this.cards.length+" cards"),this.node},e}(i.default);Object.defineProperty(e,"__esModule",{value:!0}),e.default=o},function(t,e,n){"use strict";var r=this&&this.__extends||function(t,e){function n(){this.constructor=t}for(var r in e)e.hasOwnProperty(r)&&(t[r]=e[r]);t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)},i=n(2),o=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.cards=[],e.visible=[],e}return r(e,t),e.prototype.add=function(t){this.clearVisible(),this.visible=t.map(function(t){return t.revealed=!0,t}),this.updateNode()},e.prototype.clearVisible=function(){for(;this.visible.length;){var t=this.visible.pop();t.revealed=!1,this.cards.push(t)}},e.prototype.undoAdd=function(){return this.cards.pop()},e.prototype.recycle=function(){this.clearVisible();var t=this.cards;return this.cards=[],this.updateNode(),t},e.prototype.draw=function(){if(this.visible.length){var t=this.visible.pop();return 0===this.visible.length,t}return null},e.prototype.setupNode=function(){return this.node=document.createElement("div"),this.node.className="waste",this.updateNode()},e.prototype.updateNode=function(){if(this.node){this.node.innerHTML="";var t=document.createElement("p");t.textContent=this.cards.length+" hidden",this.node.appendChild(t);var e=document.createElement("p");e.textContent=this.visible.length+" visible",this.node.appendChild(e)}return this.node},e}(i.default);Object.defineProperty(e,"__esModule",{value:!0}),e.default=o},function(t,e,n){"use strict";var r=n(6),i=n(0),o=n(8),a=function(){function t(){}return t.createCards=function(t){for(var e=[],n=i.CardValue.Ace;n<=i.CardValue.King;n++)e.push(new r.default(n,i.CardSuit.Clove,t)),e.push(new r.default(n,i.CardSuit.Diamond,t)),e.push(new r.default(n,i.CardSuit.Heart,t)),e.push(new r.default(n,i.CardSuit.Spade,t));return e},t.shuffleCards=function(t){for(var e,n,r=t.length;0!==r;)e=Math.floor(Math.random()*r--),n=t[e],t[e]=t[r],t[r]=n;return t},t.buildTableau=function(t){for(var e=[],n=0;n<7;n++)e.push(new o.default(n));for(var r,i=0;i<28;)for(var n=1;n<=e.length;n++){var a=n-1;e[a].cards.length<a?(r=t.draw(),r.isInPile=!0,e[a].cards.push(r),i++):e[a].cards.length==a&&(r=t.draw(),r.isInPile=!0,r.revealed=!0,e[a].cards.push(r),i++)}return e},t}();Object.defineProperty(e,"__esModule",{value:!0}),e.default=a},function(t,e,n){"use strict";var r=function(){function t(){}return t}();r.drawCount=3,Object.defineProperty(e,"__esModule",{value:!0}),e.default=r},function(t,e,n){n(4),t.exports=n(3)}]);
//# sourceMappingURL=app.js.map